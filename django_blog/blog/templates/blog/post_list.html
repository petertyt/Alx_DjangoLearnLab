{% extends 'blog/base.html' %} {% block content %}
<h2>Posts</h2>
<form method="get" style="margin-bottom: 1rem">
  <input
    type="text"
    name="q"
    placeholder="Search posts or tags"
    value="{{ request.GET.q }}"
  />
  <button type="submit">Search</button>
  {% if request.GET.tag %}<a href="{% url 'post-list' %}">Clear tag</a>{% endif
  %} {% if request.GET.q %}<a href="{% url 'post-list' %}">Clear search</a>{%
  endif %}
</form>
{% if user.is_authenticated %}
<p><a href="{% url 'post-create' %}">New Post</a></p>
{% endif %}
<ul>
  {% for post in posts %}
  <li>
    <a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a>
    <small>by {{ post.author.username }} on {{ post.published_date }}</small>
    {% if post.tags.all %}
    <div>
      {% for tag in post.tags.all %}
      <a href="{% url 'post-list' %}?tag={{ tag.name }}">#{{ tag.name }}</a>
      {% endfor %}
    </div>
    {% endif %}
  </li>
  {% empty %}
  <li>No posts yet.</li>
  {% endfor %}
</ul>
{% endblock %}
